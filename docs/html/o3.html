<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Energy Reduction Planning Task</title>
    <style>
        /* General Styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            color: #333;
            background-color: #f4f4f4;
        }
        h1, h2, h3 {
            color: #00539C;
        }
        p {
            font-size: 16px;
            line-height: 1.6;
        }
        /* Table Styles */
        table {
            width: 90%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color: #fff;
        }
        table, th, td {
            border: 1px solid #ccc;
        }
        th {
            background-color: #e1eaf2;
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }
        td {
            padding: 8px;
            text-align: center;
        }
        /* Form and Inputs */
        .user-input {
            margin-bottom: 20px;
        }
        .user-input label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .user-input input[type="checkbox"] {
            margin-right: 10px;
        }
        .slider-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .slider-container label {
            flex: 1;
        }
        .slider-container input[type="range"] {
            flex: 2;
            margin-right: 10px;
        }
        .slider-value {
            width: 60px;
            text-align: right;
        }
        /* Buttons */
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #00539C;
            color: #fff;
            border: none;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 5px;
        }
        button:hover {
            background-color: #003f73;
        }
        /* Sections */
        #ai-assistant, #ai-search-assistant {
            border: 1px solid #ccc;
            padding: 15px;
            background-color: #fff;
            margin-top: 20px;
            border-radius: 5px;
        }
        .ai-message {
            margin-bottom: 15px;
            background-color: #e9f5fe;
            padding: 10px;
            border-left: 4px solid #00539C;
        }
        .ai-message p {
            margin: 5px 0;
        }
        #selected-info, #reduction-summary {
            background-color: #fff;
            padding: 15px;
            margin-top: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        #selected-info h3, #reduction-summary h3 {
            margin-top: 0;
        }
        .info-item {
            margin-bottom: 15px;
        }
        .hidden {
            display: none;
        }
        /* Footer */
        footer {
            margin-top: 50px;
            text-align: center;
            font-size: 14px;
            color: #777;
        }
    </style>
</head>
<body>

<h1>Energy Reduction Planning Task</h1>

<p>Welcome to the Energy Reduction Planning Task. In this task, you will help the Adams Family reduce their energy usage by analyzing their current consumption and creating an actionable plan. You'll have the opportunity to search for detailed information and receive AI assistance. Let's begin!</p>

<h2>Adams Family Energy Usage Data</h2>

<p>The table below shows the Adams Family's energy usage from the prior year:</p>

<table>
    <tr>
        <th>Appliance Category</th>
        <th>Prior Year Usage (kWh)</th>
    </tr>
    <tr>
        <td>Cooling</td>
        <td>2,581</td>
    </tr>
    <tr>
        <td>Heating</td>
        <td>6,157</td>
    </tr>
    <tr>
        <td>Water Heating</td>
        <td>5,061</td>
    </tr>
    <tr>
        <td>Refrigerator</td>
        <td>1,266</td>
    </tr>
    <tr>
        <td>Other Appliances</td>
        <td>7,608</td>
    </tr>
    <tr>
        <th>Total</th>
        <th>22,673</th>
    </tr>
</table>

<p>
    The goal is to reduce the Adams Family's total energy usage by <strong>15%</strong>, which is <strong>3,401 kWh</strong> of their total usage of 22,673 kWh.
</p>

<h2>Information Search Phase</h2>

<p>Before creating your energy reduction plan, you may choose additional information to reveal about the Adams Family's energy usage. This information may help you make a more informed plan. You can also consult the AI Advisor for suggestions on what information might be most useful. You have <strong><span id="ai-search-counter">3</span> AI queries</strong> remaining.</p>

<button type="button" id="get-ai-advice">Consult AI Advisor</button>

<div id="ai-search-assistant" class="hidden">
    <h2>AI Advisor Assistance</h2>
    <div id="ai-search-messages">
        <!-- AI messages will appear here -->
    </div>
</div>

<h3>Select Information to Reveal:</h3>

<form id="info-selection-form">
    <!-- Cooling Details -->
    <div class="user-input">
        <label><strong>Cooling:</strong></label>
        <input type="checkbox" name="info" value="cooling-thermostat"> Thermostat Settings<br>
        <input type="checkbox" name="info" value="cooling-ac-unit"> AC Unit Efficiency<br>
        <input type="checkbox" name="info" value="cooling-insulation"> Home Insulation Levels
    </div>
    <!-- Heating Details -->
    <div class="user-input">
        <label><strong>Heating:</strong></label>
        <input type="checkbox" name="info" value="heating-thermostat"> Thermostat Settings<br>
        <input type="checkbox" name="info" value="heating-furnace"> Furnace Efficiency<br>
        <input type="checkbox" name="info" value="heating-insulation"> Home Insulation Levels
    </div>
    <!-- Water Heating Details -->
    <div class="user-input">
        <label><strong>Water Heating:</strong></label>
        <input type="checkbox" name="info" value="waterheater-usage"> Average Hot Water Usage<br>
        <input type="checkbox" name="info" value="waterheater-type"> Water Heater Type<br>
        <input type="checkbox" name="info" value="waterheater-temp"> Water Heater Temperature Settings
    </div>
    <!-- Refrigerator Details -->
    <div class="user-input">
        <label><strong>Refrigerator:</strong></label>
        <input type="checkbox" name="info" value="refrigerator-age"> Refrigerator Age<br>
        <input type="checkbox" name="info" value="refrigerator-size"> Refrigerator Size<br>
        <input type="checkbox" name="info" value="refrigerator-usage"> Usage Patterns
    </div>
    <!-- Other Appliances Details -->
    <div class="user-input">
        <label><strong>Other Appliances:</strong></label>
        <input type="checkbox" name="info" value="appliances-lighting"> Lighting Usage<br>
        <input type="checkbox" name="info" value="appliances-electronics"> Electronic Devices Usage<br>
        <input type="checkbox" name="info" value="appliances-laundry"> Laundry Habits
    </div>

    <button type="button" id="reveal-info">Reveal Selected Information</button>
</form>

<div id="selected-info" class="hidden">
    <h3>Revealed Information:</h3>
    <div id="detailed-data">
        <!-- Detailed data will be displayed here -->
    </div>
    <button type="button" id="proceed-to-plan">Proceed to Create Plan</button>
</div>

<h2 id="plan-section" class="hidden">Create Your Energy Reduction Plan</h2>

<form id="reduction-form" class="hidden">
    <p>Adjust the sliders to allocate reductions for each appliance category. The total reduction should aim to meet or exceed the goal of <strong>3,401 kWh</strong>.</p>
    <div class="slider-container">
        <label for="cooling-reduction">Cooling Reduction:</label>
        <input type="range" id="cooling-reduction" min="0" max="2581" value="0" step="10">
        <input type="text" id="cooling-value" class="slider-value" readonly> kWh
    </div>
    <div class="slider-container">
        <label for="heating-reduction">Heating Reduction:</label>
        <input type="range" id="heating-reduction" min="0" max="6157" value="0" step="10">
        <input type="text" id="heating-value" class="slider-value" readonly> kWh
    </div>
    <div class="slider-container">
        <label for="water-heating-reduction">Water Heating Reduction:</label>
        <input type="range" id="water-heating-reduction" min="0" max="5061" value="0" step="10">
        <input type="text" id="water-heating-value" class="slider-value" readonly> kWh
    </div>
    <div class="slider-container">
        <label for="refrigerator-reduction">Refrigerator Reduction:</label>
        <input type="range" id="refrigerator-reduction" min="0" max="1266" value="0" step="10">
        <input type="text" id="refrigerator-value" class="slider-value" readonly> kWh
    </div>
    <div class="slider-container">
        <label for="other-reduction">Other Appliances Reduction:</label>
        <input type="range" id="other-reduction" min="0" max="7608" value="0" step="10">
        <input type="text" id="other-value" class="slider-value" readonly> kWh
    </div>
    <button type="button" id="submit-plan">Submit Plan</button>
</form>

<div id="reduction-summary" class="hidden">
    <h3>Reduction Summary:</h3>
    <p><strong>Total Reduction:</strong> <span id="total-reduction">0</span> kWh</p>
    <p><strong>Remaining Reduction Needed:</strong> <span id="remaining-reduction">3,401</span> kWh</p>
    <p>You have <strong><span id="ai-plan-counter">3</span> AI queries</strong> remaining.</p>
    <button type="button" id="get-ai-plan-advice">Consult AI Advisor</button>
</div>

<div id="ai-assistant" class="hidden">
    <h2>AI Advisor Suggestions</h2>
    <div id="ai-messages">
        <!-- AI messages will appear here -->
    </div>
    <button type="button" id="revise-plan">Revise Plan</button>
</div>

<!-- Footer -->
<footer>
    &copy; 2023 Energy Reduction Planning Task
</footer>

<script>
    // JavaScript code to handle the information search phase, slider inputs, and AI assistant

    // Constants and Variables
    const targetReduction = 3401; // 15% of 22,673 kWh
    let aiSearchQueries = 3;
    let aiPlanQueries = 3;

    // Information Search Phase Elements
    const getAIAdviceButton = document.getElementById('get-ai-advice');
    const aiSearchAssistantDiv = document.getElementById('ai-search-assistant');
    const aiSearchMessagesDiv = document.getElementById('ai-search-messages');
    const revealInfoButton = document.getElementById('reveal-info');
    const selectedInfoDiv = document.getElementById('selected-info');
    const detailedDataDiv = document.getElementById('detailed-data');
    const proceedToPlanButton = document.getElementById('proceed-to-plan');
    const aiSearchCounterDisplay = document.getElementById('ai-search-counter');

    // Reduction Plan Elements
    const planSection = document.getElementById('plan-section');
    const reductionForm = document.getElementById('reduction-form');
    const totalReductionDisplay = document.getElementById('total-reduction');
    const remainingReductionDisplay = document.getElementById('remaining-reduction');
    const submitPlanButton = document.getElementById('submit-plan');
    const aiAssistantDiv = document.getElementById('ai-assistant');
    const aiMessagesDiv = document.getElementById('ai-messages');
    const revisePlanButton = document.getElementById('revise-plan');
    const aiPlanCounterDisplay = document.getElementById('ai-plan-counter');
    const getAIPlanAdviceButton = document.getElementById('get-ai-plan-advice');
    const reductionSummaryDiv = document.getElementById('reduction-summary');

    // Slider Elements
    const sliders = {
        cooling: document.getElementById('cooling-reduction'),
        heating: document.getElementById('heating-reduction'),
        waterHeating: document.getElementById('water-heating-reduction'),
        refrigerator: document.getElementById('refrigerator-reduction'),
        other: document.getElementById('other-reduction'),
    };

    const sliderValues = {
        cooling: document.getElementById('cooling-value'),
        heating: document.getElementById('heating-value'),
        waterHeating: document.getElementById('water-heating-value'),
        refrigerator: document.getElementById('refrigerator-value'),
        other: document.getElementById('other-value'),
    };

    // Initialize Slider Values
    for (let key in sliders) {
        sliderValues[key].value = sliders[key].value;
    }

    // Update Slider Values and Summary
    function updateReductionSummary() {
        let totalReduction = 0;
        for (let key in sliders) {
            sliderValues[key].value = sliders[key].value;
            totalReduction += parseInt(sliders[key].value) || 0;
        }
        totalReductionDisplay.textContent = totalReduction;
        const remainingReduction = targetReduction - totalReduction;
        remainingReductionDisplay.textContent = remainingReduction > 0 ? remainingReduction : 0;
    }

    // Slider Event Listeners
    for (let key in sliders) {
        sliders[key].addEventListener('input', updateReductionSummary);
    }

    // Information Search Phase
    getAIAdviceButton.addEventListener('click', () => {
        if (aiSearchQueries > 0) {
            aiSearchAssistantDiv.classList.remove('hidden');
            aiSearchMessagesDiv.innerHTML = '';

            // Simulated AI Response
            const message = document.createElement('div');
            message.classList.add('ai-message');
            message.innerHTML = `<p><strong>AI Advisor:</strong> The Adams Family's highest energy usage is in <strong>heating</strong> and <strong>other appliances</strong>. You may find it helpful to explore details in those categories.</p>`;
            aiSearchMessagesDiv.appendChild(message);

            aiSearchQueries--;
            aiSearchCounterDisplay.textContent = aiSearchQueries;
            if (aiSearchQueries <= 0) {
                getAIAdviceButton.disabled = true;
                getAIAdviceButton.textContent = 'No AI Queries Remaining';
            }
        }
    });

    revealInfoButton.addEventListener('click', () => {
        const selectedOptions = document.querySelectorAll('input[name="info"]:checked');
        if (selectedOptions.length === 0) {
            alert('Please select at least one piece of information to reveal.');
            return;
        }
        selectedInfoDiv.classList.remove('hidden');
        detailedDataDiv.innerHTML = '';

        selectedOptions.forEach(option => {
            const infoDiv = document.createElement('div');
            infoDiv.classList.add('info-item');
            switch (option.value) {
                // (Detailed information content remains the same as previous implementation)
                // ... (Same switch-case structure)
                // (See previous code for full case statements)
            }
            detailedDataDiv.appendChild(infoDiv);
        });
    });

    proceedToPlanButton.addEventListener('click', () => {
        planSection.classList.remove('hidden');
        reductionForm.classList.remove('hidden');
        reductionSummaryDiv.classList.remove('hidden');
        // Scroll to the planning section
        planSection.scrollIntoView({ behavior: 'smooth' });
    });

    // Submit Plan Button
    submitPlanButton.addEventListener('click', () => {
        // Disable sliders
        for (let key in sliders) {
            sliders[key].disabled = true;
        }
        submitPlanButton.disabled = true;
        getAIPlanAdviceButton.disabled = false;
    });

    // AI Plan Assistance
    getAIPlanAdviceButton.addEventListener('click', () => {
        if (aiPlanQueries > 0) {
            aiAssistantDiv.classList.remove('hidden');
            aiMessagesDiv.innerHTML = '';

            const totalReduction = parseInt(totalReductionDisplay.textContent);
            const remainingReduction = targetReduction - totalReduction;

            // Simulated AI Response
            if (remainingReduction > 0) {
                const message1 = document.createElement('div');
                message1.classList.add('ai-message');
                message1.innerHTML = `<p><strong>AI Advisor:</strong> You are ${remainingReduction} kWh short of the goal. Consider increasing reductions in high-usage areas.</p>`;
                aiMessagesDiv.appendChild(message1);

                const message2 = document.createElement('div');
                message2.classList.add('ai-message');
                message2.innerHTML = `<p>Based on the data, increasing reductions in <strong>heating</strong> and <strong>other appliances</strong> may help you meet the target.</p>`;
                aiMessagesDiv.appendChild(message2);
            } else {
                const message = document.createElement('div');
                message.classList.add('ai-message');
                message.innerHTML = `<p><strong>AI Advisor:</strong> Excellent! You've met or exceeded the reduction goal. Consider confirming if these reductions are feasible for the family.</p>`;
                aiMessagesDiv.appendChild(message);
            }

            aiPlanQueries--;
            aiPlanCounterDisplay.textContent = aiPlanQueries;
            if (aiPlanQueries <= 0) {
                getAIPlanAdviceButton.disabled = true;
                getAIPlanAdviceButton.textContent = 'No AI Queries Remaining';
            }
        }
    });

    // Revise Plan Button
    revisePlanButton.addEventListener('click', () => {
        // Re-enable sliders
        for (let key in sliders) {
            sliders[key].disabled = false;
        }
        submitPlanButton.disabled = false;
        aiAssistantDiv.classList.add('hidden');
    });

    // Placeholder for detailed info switch-case (same as previous implementation)
    // ...

</script>

</body>
</html>